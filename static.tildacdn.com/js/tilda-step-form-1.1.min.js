function t_form_splittingOnStep(e){var t=document.querySelector("#rec"+e);if(t){var r=t.querySelector(".t-form");if(r){var o=r.querySelectorAll(".t-input-group.t-input-group_st"),n=t.querySelector(".t-form__inputsbox"),a=n.querySelectorAll(".t-input-group_st"),i,s,c,l=0,u=n.querySelectorAll(".t-form-step-divider"),p=null;d()}}function d(){0!==a.length&&(Array.prototype.forEach.call(o,(function(e){e.style.margin="0px"})),n.classList.add("t-form__screen"),_(),c=n.querySelector(".t-form__screen-current-view"),y(),i=n.querySelectorAll(".t-form__screen-wrapper"),l=f(i),s=i.length,r.classList.contains("t-conditional-form")&&t_form__onFuncLoad("t_form__conditionals__initStepForm",(function(){var t;p=t_form__conditionals__initStepForm({recId:e,steps:i,activeStepIndex:l,onConditionalFieldChange:function e(t){s=t.totalActiveStepsCount,T(t.activePossibleStepIndex+1,t.totalActiveStepsCount),b()}}),s=p.getState().totalActiveStepsCount,b()})),g(),h(),n&&A())}function f(e){var t;return Array.from(e).findIndex((function(e){var t=e.querySelector(".t-input-group:not(.t-form__hidden)");return Boolean(t)}))}function _(){var r=n.querySelector(".t-form__submit"),o="",a="",i="",s="",c="";i=window.t_forms__lang,u&&u[l]?(s=u[l].getAttribute("data-tilda-form-step-btn-next"),c=u[l].getAttribute("data-tilda-form-step-btn-prev")):l===u.length&&u&&u[l-1]&&(s=u[l-1].getAttribute("data-tilda-form-step-btn-next"),c=u[l-1].getAttribute("data-tilda-form-step-btn-prev")),o=s||("RU"===i&&i?"Далее":"Next"),a=c||("RU"===i&&i?"Назад":"Back");var p=t.querySelector(".t-form__screen-btn-next"),d=t.querySelector(".t-form__screen-btn-prev");if(p&&d){var f=d.querySelector(".js-btn-txt"),_=p.querySelector(".js-btn-txt");return f&&(f.innerHTML="←&nbsp;"+a),_&&(_.innerHTML=o+"&nbsp;→"),void t_onFuncLoad("t_forms__parseVariables",(function(){t_forms__parseVariables(p),t_forms__parseVariables(d)}))}var y=document.getElementById("button_step_"+e);if(y){var m=y.content.cloneNode(!0).firstElementChild,v=y.content.cloneNode(!0).firstElementChild;m.classList.add("t-form__screen-btn-prev"),m.style.display="none",v.classList.add("t-form__screen-btn-next");var g=m.querySelector(".js-btn-txt"),h=v.querySelector(".js-btn-txt");g&&(g.innerHTML="←&nbsp;"+a),h&&(h.innerHTML=o+"&nbsp;→"),r.insertAdjacentHTML("beforeend",""+m.outerHTML+v.outerHTML)}var S='<div class="t-form__screen-current-view t-name"></div>';r.insertAdjacentHTML("beforeend",S),t_onFuncLoad("t_forms__parseVariables",(function(){t_forms__parseVariables(r)}))}function y(){var e=n.querySelectorAll(".t-input-group"),t=v(),r=[],o=[];Array.prototype.forEach.call(e,(function(e){e.classList.contains("t-input-group_st")?(r.push(t),t=v()):t.appendChild(e)})),r.push(t),Array.prototype.forEach.call(n.children,(function(e,t){e.classList.contains("t-input-group_st")&&o.push(t)})),o.push(o[o.length-1]+1),Array.prototype.forEach.call(r,(function(e,t){n.insertBefore(e,n.children[o[t]]),m(o,t+1)}))}function m(e,t){for(var r=t;r<e.length;r++)e[r]+=1}function v(){var e=document.createElement("div");return e.classList.add("t-form__screen-wrapper"),e}function g(){c.innerHTML='<div class="t-form__screen-number-container"><span class="t-form__screen-number-current t-form__screen-number_opacity"></span><span>/</span><span class="t-form__screen-number-total">'+s+'</span></div><svg class="t-form__screen-progress" style="-webkit-transform:rotate(-90deg);-ms-transform:rotate(-90deg);transform:rotate(-90deg);" width="30" height="30" viewPort="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle class="t-form__screen-progress-circle" r="10" cx="15" cy="15" fill="transparent" stroke-dasharray="0" stroke-dashoffset="0"></circle><circle class="t-form__screen-progress-bar" r="10" cx="15" cy="15" fill="transparent" stroke-dasharray="62.8319" stroke-dashoffset="62.8319"></circle></svg>'}function h(){var o=t.querySelector(".t-form__screen-btn-prev"),n=t.querySelector(".t-form__screen-btn-next"),a=t.querySelector(".t-submit"),s=t.querySelector(".t-form-step-divider_novalidate"),c=t.querySelector(".t-form__screen-number_opacity"),u=t.querySelector(".t-form__screen-progress-bar"),d=t_throttle(L,300,this);function f(){Array.prototype.forEach.call(i,(function(e){e.classList.remove("t-form__screen-wrapper_active")})),i[l].classList.add("t-form__screen-wrapper_active"),H()?(r.classList.add("js-form-proccess"),a.style.removeProperty("display")):(r.classList.remove("js-form-proccess"),a.style.display="none");var e=E();m(c,e),S(u,e),q(),x(t),y(i[l])}function y(t){var r;t&&t.querySelectorAll('input[type="range"]').forEach((function(t){var r=t.getAttribute("id").replace("input_","");"function"==typeof t_inputRange__updateVal&&t_inputRange__updateVal(e,r)}))}function m(e,t){e.innerHTML=t}function v(e){e.preventDefault(),N()||(l=C(),p&&p.onStepChange(l),b(),f(),w(),_())}function g(e){var t;e.preventDefault(),!s&&F(r,i,l)||H()||(l=k(),p&&p.onStepChange(l),b(),f(),w(),t_form__lazyLoad(),_())}function h(e){var t=i[l].querySelectorAll(".t-input-group.t-input-group_ta");if(13===e.keyCode&&!r.classList.contains("js-form-proccess")&&0===t.length){var o;if(!s&&F(r,i,l))return void e.preventDefault();g(e),e.preventDefault()}}o.addEventListener("click",v),n.addEventListener("click",g),Array.prototype.forEach.call(i,(function(e){e.addEventListener("keypress",h)})),window.addEventListener("resize",d),f()}function S(e,t){var r=parseFloat(e.getAttribute("stroke-dasharray")).toFixed(3),o=parseFloat(r/s).toFixed(3),n=parseFloat(r-t*o).toFixed(3);e.style.strokeDashoffset=n,e.setAttribute("stroke-dashoffset",n)}function b(){var e=t.querySelector(".t-form__screen-btn-prev"),o=t.querySelector(".t-form__screen-btn-next"),n=t.querySelector(".t-submit"),a=H(),i=N();return a?(i||e.style.removeProperty("display"),o.style.display="none",r.classList.add("js-form-proccess"),void n.style.removeProperty("display")):i?(a||(r.classList.remove("js-form-proccess"),n.style.display="none"),e.style.display="none",void o.style.removeProperty("display")):(r.classList.remove("js-form-proccess"),n.style.display="none",e.style.removeProperty("display"),void o.style.removeProperty("display"))}function w(){var e=t.querySelector(".t-popup"),o=0;if(e){o=r.offsetTop;var n=document.querySelector(".t702");if(n){var a=n.querySelector(".t702__text-wrapper"),i=n.querySelector(".t702__close, .t-popup__close");if(a){var s=window.getComputedStyle(a),c=parseFloat(s.height),l=parseFloat(s.marginTop),u=parseFloat(s.marginBottom);isNaN(l)||isNaN(c)||(c+=l),isNaN(u)||isNaN(c)||(c+=u),o=o-c-4}if(i){var p=window.getComputedStyle(i),d=parseFloat(p.height),f=parseFloat(p.marginTop),_=parseFloat(p.marginBottom);isNaN(f)||isNaN(d)||(d+=f),isNaN(_)||isNaN(d)||(d+=_),o=o-d-4}}e.scrollTop=o}else(o=t.querySelector(".t-form__screen").getBoundingClientRect().top+window.pageYOffset-150)<window.scrollY&&window.scrollTo(0,o)}function q(){var e=t.querySelector(".t-cover"),r=t.querySelector("div[data-hook-content]"),o=t.querySelector(".t-cover__carrier");if(e&&r&&o){var n=e.offsetHeight,a=r.offsetHeight,i=o.getAttribute("data-content-cover-height");if(i&&(i=-1!==i.indexOf("px")?parseInt(i):window.innerHeight*(parseInt(i)/100)),a>300&&(a+=120),a>1e3&&(a+=100),a<i&&(a=i),n!==a){var s=t.querySelector(".t-cover__filter"),c=t.querySelector(".t-cover__wrapper"),l=t.querySelector(".t-cover__container");console.log("auto correct cover height: "+a),e&&(e.style.height=a+"px"),o&&(o.style.height=a+"px"),s&&(s.style.height=a+"px"),c&&(c.style.height=a+"px"),l&&(l.style.height=a+"px"),window.isMobile||o.querySelectorAll("iframe").length>0&&(console.log("correct video from cover_fixcontentheight"),t_form__onFuncLoad("setWidthAndHeightVideo",(function(){setWidthAndHeightVideo(o,a+"px","youtube")})))}}}function L(){q(),n&&A()}function x(e){var t=e.querySelector(".t-popup__container");if(t){var r,o=120,n;parseFloat(getComputedStyle(t,null).height.replace("px",""))>window.innerHeight-o?t.classList.add("t-popup__container-static"):t.classList.remove("t-popup__container-static")}}function A(){window.innerWidth<640?c.style.display="none":c.style.display="block"}function F(e,t,r){var o=t[r],n=window.tildaForm.validate(o),a;window.tildaForm.hideErrors(e);var i=n[0],s;i&&(a="emptyfill"!=i.type[0]&&window.tildaForm.showErrors(e,n));return a}function T(e,r){var o=c.querySelector(".t-form__screen-number-current"),n=c.querySelector(".t-form__screen-number-total"),a;o.innerHTML=e,n.innerHTML=r,S(t.querySelector(".t-form__screen-progress-bar"),e)}function E(){return p?p.getState().activePossibleStepIndex+1:l+1}function H(){var e;return E()===s}function N(){var e;return 1===E()}function k(){return p?p.getState().nextStepIndex:l+1}function C(){return p?p.getState().prevStepIndex:l-1}}function t_form__lazyLoad(){var e=document.querySelector("#allrecords");e&&(e.getAttribute("data-tilda-mode")||"y"!==window.lazy&&"yes"!==e.getAttribute("data-tilda-lazy")||t_form__onFuncLoad("t_lazyload_update",(function(){t_lazyload_update()})))}function t_form__onFuncLoad(e,t,r){"function"==typeof window[e]?t():setTimeout((function o(){if("function"!=typeof window[e]){if("complete"===document.readyState&&"function"!=typeof window[e])throw new Error(e+" is undefined");setTimeout(o,r||100)}else t()}))}function t_form__getRootZone(){var e=document.getElementById("allrecords"),t;return e&&e.getAttribute("data-tilda-root-zone")||"com"}t_onReady((function(){var e="https://static.tildacdn."+t_form__getRootZone()+"/css/tilda-step-form-1.1.min.css",t;document.querySelector('link[href^="'+e+'"]')||document.head.insertAdjacentHTML("beforeend",'<link href="'+e+'">')}));
